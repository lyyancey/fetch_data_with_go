# 快速开始指南

## 📋 项目文件说明

```
fetch_data_with_go/
├── main.go              # Go翻译版（功能完整）
├── go.mod               # Go模块文件
├── config.json          # 配置文件（两个版本共用）
├── fetch_data.exe       # Go编译后的可执行文件
├── README.md            # Go版本使用说明
├── COMPARISON.md        # Python vs Go 详细对比
└── 快速开始.md          # 本文件
```

## 🚀 30秒快速开始

### 使用Go版本（推荐）

1. **编辑配置文件** `config.json`:
   ```json
   {
     "access_token": "粘贴你的token这里",
     "page_size": 1000,
     "request_delay": 0.5,
     "output_file_prefix": "supplier_data"
   }
   ```

2. **运行程序**:
   ```bash
   # 直接运行（已编译好）
   fetch_data.exe
   
   # 或者从源码运行
   go run main.go
   ```

3. **查看结果**:
   程序会自动生成CSV文件，例如：`supplier_data_20251110_143639.csv`

## 🔑 如何获取Access Token

1. 打开Chrome浏览器
2. 访问目标网站并登录
3. 按F12打开开发者工具
4. 切换到"Network"（网络）标签
5. 在页面上执行一次查询操作
6. 找到API请求，查看Request Headers
7. 复制 `Access-Token` 的值
8. 粘贴到 `config.json` 的 `access_token` 字段

## ⚙️ 配置项详解

| 配置项 | 说明 | 默认值 | 建议 |
|--------|------|--------|------|
| `access_token` | API访问令牌 | 无 | **必填** |
| `page_size` | 每页抓取数量 | 1000 | 500-2000之间 |
| `request_delay` | 请求间隔（秒） | 0.5 | 0.3-1.0之间，太快可能被限制 |
| `output_file_prefix` | 输出文件前缀 | supplier_data | 自定义文件名前缀 |

## 📊 输出文件说明

程序会生成带时间戳的CSV文件：
```
supplier_data_20251110_143639.csv
```

文件格式：
- **编码**: UTF-8 with BOM（Excel可直接打开）
- **字段**: 21个字段（供应商名称、代码、联系方式等）
- **分隔符**: 逗号

## 🎯 两个版本如何选择？

### 选Go版本的理由：
- ✅ **性能更好**: 速度快3-5倍，内存占用少
- ✅ **部署简单**: 单个exe文件，无需安装任何依赖
- ✅ **分发方便**: 可以直接给同事使用
- ✅ **资源占用少**: 适合定时任务

## 💡 常见问题

### Q1: 编译Go版本需要什么？
A: 需要安装Go 1.24+，运行 `go build main.go` 即可

### Q2: Token过期了怎么办？
A: 重新登录网站，获取新的Token，更新config.json

### Q3: 抓取速度慢怎么办？
A: 可以在代码中调整 `maxWorkers` 参数（默认5），增加到10或20

Go版本修改位置：
```go
totalRows, err := fetcher.FetchAllDataMultithread(basePayload, "", 10)  // 改成10个线程
```

### Q4: 如何只抓取部分数据？
A: 修改 `page_size` 为较小的值，例如10，程序会只抓取第一页

### Q5: CSV文件乱码怎么办？
A: 程序已经使用UTF-8 BOM编码，Excel应该能正确显示。如果还是乱码，可以用记事本打开，另存为时选择UTF-8编码。

## 🔧 高级用法

### 1. 使用自定义配置文件
```bash
# Go版本
go run main.go my_custom_config.json
```

### 2. 跨平台编译Go版本
```bash
# Windows
GOOS=windows GOARCH=amd64 go build -o fetch_data_windows.exe main.go

# Linux
GOOS=linux GOARCH=amd64 go build -o fetch_data_linux main.go

# Mac
GOOS=darwin GOARCH=amd64 go build -o fetch_data_mac main.go
```

### 3. 定时任务配置
**Windows (任务计划程序)**:
1. 打开"任务计划程序"
2. 创建基本任务
3. 设置触发器（例如每天8点）
4. 操作：启动程序 `D:\code\fetch_data_with_go\fetch_data.exe`

**Linux (crontab)**:
```bash
# 每天8点运行
0 8 * * * /path/to/fetch_data_linux
```

## 📞 技术支持

遇到问题？检查清单：
- [ ] config.json文件格式正确（有效的JSON）
- [ ] access_token已填写且未过期
- [ ] 网络连接正常
- [ ] 目标网站可以访问
- [ ] 有写入文件的权限

## 📚 更多信息

- `README.md` - Go版本详细说明
- `COMPARISON.md` - Python vs Go 深度对比
- `main.go` - Go源码（有详细注释）

---

**祝你使用愉快！** 🎉

